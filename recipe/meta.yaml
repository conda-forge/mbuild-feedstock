{% set name = "mbuild" %}
{% set version = "1.3.0" %}

package:
  name: mbuild-split
  version: {{ version }}

source:
  url: https://github.com/mosdef-hub/mbuild/archive/{{ version }}.tar.gz
  sha256: 9af591cc5221fb8545b27569181d2bdbf22aba258623d5c6b2c2c4c2e5c47e71

build:
  number: 0

outputs:
  - name: mbuild-base
    script: build_base.sh
    build:
      noarch: python

    requirements:
      host:
        - python {{ python_min }}
        - pip
        - setuptools
      run:
        - python >={{ python_min }},<=3.13
        - mdtraj
        - networkx
        - treelib
        - numpy >=2.0,<2.3
        - scipy
        - parmed >=3.4.0
        - ele
        - gmso >=0.12.0
        - rdkit >=2021  # worth considering putting it in full package only
        - boltons

      run_constrained:
        - foyer >=0.11.0

    test:
      requires:
        - python {{ python_min }}
      imports:
        - mbuild

  - name: mbuild
    build:
      noarch: python

    requirements:
      host:
        - python {{ python_min }}
      run:
        - python >={{ python_min }},<=3.13
        - packmol >=20.15
        - py3dmol
        - {{ pin_subpackage('mbuild-base', exact=True) }}

    test:
      requires:
        - python {{ python_min }}
      imports:
        - mbuild
about:
  home: https://github.com/mosdef-hub/mbuild
  license: MIT
  license_family: MIT
  license_file: LICENSE.rst
  summary: A hierarchical, component based molecule builder.

  # The remaining entries in this section are optional, but recommended.
  description: |
    With just a few lines of mBuild code, you can assemble reusable components into
    complex molecular systems for molecular dynamics simulations. mBuild is
    designed to minimize or even eliminate the need to explicitly translate and
    orient components when building systems: you simply tell it to connect two
    pieces! mBuild also keeps track of the system's topology so you don't have to
    worry about manually defining bonds when constructing chemically bonded
    structures from smaller components.
  doc_url: https://mbuild.mosdef.org/
  dev_url: https://github.com/mosdef-hub/mbuild

extra:
  recipe-maintainers:
    - chrisjonesBSU
    - bdice
    - justinGilmer
    - rmatsum836
    - daico007
    - umesh-timalsina
    - CalCraven
